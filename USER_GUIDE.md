# AI旅行规划助手 - 用户指南

## 📋 目录

1. [项目简介](#项目简介)
2. [快速开始](#快速开始)
3. [环境配置](#环境配置)
4. [功能使用说明](#功能使用说明)
5. [常见问题](#常见问题)

---

## 项目简介

**AI旅行规划助手**是一款基于人工智能的智能旅行规划Web应用，通过语音和文字交互方式，为用户提供个性化的旅行路线规划、预算管理和实时旅行辅助服务。

### 核心功能

- 🎤 **智能语音输入**：支持语音描述旅行需求
- 🤖 **AI行程生成**：基于大语言模型自动生成详细旅行方案
- 🗺️ **地图可视化**：在地图上展示所有行程地点和路线
- 💰 **费用管理**：记录和追踪旅行费用，智能预算分析
- 📱 **多端同步**：数据云端存储，支持多设备访问

### 技术栈

- **前端**：React 18 + TypeScript + Vite + Ant Design 5
- **数据库**：Supabase (PostgreSQL)
- **认证**：Supabase Auth
- **地图**：高德地图 Web API
- **语音**：讯飞语音识别 API
- **AI**：阿里云通义千问大模型

---

## 快速开始

### 1. 环境要求

- Node.js 18+ 
- npm 或 yarn
- 现代浏览器（Chrome/Firefox/Safari/Edge 最新版）

### 2. 安装依赖

```bash
cd frontend
npm install
```

### 3. 启动开发服务器

```bash
npm run dev
```

访问 `http://localhost:5173` 即可使用。

---

## 环境配置

### 1. Supabase 配置

在 `frontend` 目录创建 `.env` 文件：

```env
# Supabase 配置
VITE_SUPABASE_URL=你的Supabase项目URL
VITE_SUPABASE_ANON_KEY=你的Supabase匿名密钥
```

**获取方式**：
1. 访问 [Supabase](https://supabase.com/)，创建账号
2. 创建新项目
3. 在项目设置中找到 API 密钥

### 2. 数据库初始化

在 Supabase SQL Editor 中依次执行以下脚本：

```bash
docs/database-setup.sql          # 基础表结构
docs/user-profiles-setup.sql     # 用户资料表
docs/api-configs-setup.sql       # API配置表
docs/travel-plans-setup.sql      # 旅行计划表
docs/expenses-setup.sql          # 费用管理表
docs/storage-policies.sql        # 存储策略
```

### 3. API 密钥配置

登录系统后，在**设置页面**的"API配置"标签页中配置：

#### 3.1 大语言模型（阿里云通义千问）

1. 访问[阿里云百炼平台](https://bailian.console.aliyun.com/)
2. 创建 API Key
3. 在系统中填入 API Key

#### 3.2 语音识别（讯飞开放平台）

1. 访问[讯飞开放平台](https://www.xfyun.cn/)
2. 创建应用，开通"实时语音转写"服务
3. 获取 APPID、APISecret、APIKey
4. 在系统中填入这三个密钥

#### 3.3 地图服务（高德地图）

1. 访问[高德开放平台](https://lbs.amap.com/)
2. 创建应用，申请 Web 端 API Key
3. 开通以下服务：
   - Web服务API
   - JavaScript API
   - 路径规划
4. 在系统中填入 API Key 和安全密钥（如需要）

---

## 功能使用说明

### 1. 注册与登录

1. 访问首页，点击"注册"
2. 输入邮箱和密码（至少8位）
3. 点击注册按钮，前往邮箱验证
4. 验证后即可登录使用

### 2. 创建旅行计划

#### 方式一：文字输入

1. 点击"创建新计划"
2. 在输入框中输入旅行需求，例如：
   ```
   我想去日本东京，5天4晚，预算8000元，2人出行，喜欢美食和动漫
   ```
3. 点击"生成行程"按钮
4. 等待AI生成详细方案（约10-30秒）

#### 方式二：语音输入

1. 点击麦克风图标
2. 说出旅行需求（需先配置语音API）
3. 确认转写文本无误后，点击"生成行程"

### 3. 查看行程详情

生成的行程包括：

- **地图展示**：左侧固定显示，标注所有景点
- **每日行程**：按天展示活动安排
- **费用管理**：记录和统计各项开销
- **路线规划**：显示总距离和预计时间

### 4. 编辑行程

在"行程详情"标签页中：

1. 点击"编辑行程"按钮
2. 修改活动名称、时间、描述等信息
3. 点击"保存"按钮

### 5. 费用管理

#### 5.1 手动添加费用

1. 在"费用管理"标签页
2. 点击"手动添加费用"
3. 填写金额、类别、日期、描述
4. 点击"添加"

#### 5.2 语音添加费用

1. 点击麦克风图标
2. 说出费用信息，例如：
   ```
   午餐花了150元
   ```
3. 系统自动解析并添加

#### 5.3 查看统计

- 费用汇总卡片：显示总预算、已花费、剩余金额
- 分类统计图表：饼图和柱状图展示各类别开销
- 预算预警：超支时自动提醒

### 6. 地图功能

- **标记点击**：点击地图标记查看地点详情
- **路线显示**：自动规划并显示多点路线
- **开始导航**：点击"开始导航"跳转到高德地图APP

### 7. 我的计划

在"我的计划"页面：

- 查看所有已创建的旅行计划
- 搜索计划（按标题或目的地）
- 查看计划详情
- 删除不需要的计划

### 8. 用户设置

#### 8.1 个人资料

- 修改昵称
- 上传头像（支持JPG/PNG，最大2MB）

#### 8.2 偏好设置

- 设置默认预算范围
- 选择喜欢的旅行类型

#### 8.3 API配置

- 配置大语言模型密钥
- 配置语音识别密钥
- 配置地图服务密钥

---

## 常见问题

### Q1: 为什么语音功能无法使用？

**A**: 请检查：
1. 是否在设置中配置了讯飞语音API密钥
2. 浏览器是否允许麦克风权限
3. 是否使用 HTTPS 或 localhost（HTTP可能无法使用语音）

### Q2: AI生成行程失败怎么办？

**A**: 可能的原因：
1. 未配置大语言模型API密钥
2. API密钥无效或余额不足
3. 输入的需求信息不完整

**解决方法**：
- 前往设置页面检查API配置
- 确保输入包含目的地、日期、预算等必要信息

### Q3: 地图无法显示怎么办？

**A**: 请检查：
1. 是否配置了高德地图API密钥
2. API密钥是否开通了必要服务
3. 浏览器是否允许地理位置权限

### Q4: 数据会丢失吗？

**A**: 不会。所有数据保存在云端（Supabase），只要登录账号，可以在任何设备访问。

### Q5: 忘记密码怎么办？

**A**: 点击登录页面的"忘记密码"，输入注册邮箱，按照邮件指引重置密码。

### Q6: API费用如何控制？

**A**: 
- 大语言模型：建议使用通义千问等性价比高的服务
- 语音识别：讯飞有免费额度
- 地图服务：高德地图每日有免费调用配额

### Q7: 是否支持导出行程？

**A**: 暂不支持，但计划在未来版本中添加PDF导出功能。

### Q8: 如何删除账号？

**A**: 请联系系统管理员或在设置页面提交账号删除申请。

---

## 技术支持

如遇到其他问题或需要帮助，请：

1. 查看项目文档：`docs/` 目录
2. 查看开发者文档：`DEVELOPER_GUIDE.md`
3. 提交 Issue 到 GitHub 仓库

---

## 更新日志

### v1.0.0 (2025-10-25)

- ✅ 用户注册登录系统
- ✅ AI智能行程生成
- ✅ 语音输入支持
- ✅ 地图可视化展示
- ✅ 费用管理功能
- ✅ 行程编辑功能
- ✅ 多端数据同步

---

**祝您旅途愉快！** 🎉
